<!DOCTYPE html>
<html>

<!-- Load jQuery -->
<script type="text/javascript" src="../js/jquery-1.6.1.min.js"></script>

<script type="text/javascript" src="tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
  $().ready(function() {
    $('textarea.tinymce').tinymce({
      // Location of TinyMCE script
      script_url : 'tiny_mce/tiny_mce.js',

      // General options
      theme : "advanced",
      mode: "textareas",
      plugins : "fullscreen,autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,advlist",

      // Theme options
      theme_advanced_buttons1 : "bold,italic,underline,|,justifyleft,justifycenter,justifyright,formatselect,fontselect,fontsizeselect",
      theme_advanced_buttons2 : "cut,copy,paste,pasteword,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,image,help,code,|,forecolor,backcolor,|,media",
      theme_advanced_buttons3 : "",
      theme_advanced_toolbar_location : "top",
      theme_advanced_toolbar_align : "left",
      theme_advanced_statusbar_location : "bottom",
      
      //onchange_callback: updateContent,
      //content_css : "content.css",
      
      // Fullscreen on init
      oninit: function(ed){
    	  ed.execCommand("mceFullScreen");
    	  ed.setContent(window.parent.htmlEditorContent);
      }
    });
    
    // Setup save button
    $('.save-content').click(function(e){
    	e.preventDefault();
    	updateContent(tinyMCE.activeEditor);
    	window.parent.$.colorbox.close();
    });
  });
  
  function updateContent(tinymce){
	  var flash = window.parent.document.getElementById('client');
    flash.saveContent(tinymce.getContent());
  }
</script>

<link href="content.css" rel="stylesheet">

<body>
  <textarea id="editor" class="tinymce" style="width:100%;height:100%;"></textarea>
  <a class="save-content" href="#">
    <span class="flex-button-left"></span>
    <span class="flex-button-middle">Close HTML Editor</span>
    <span class="flex-button-right"></span>
  </a>
</body>
</html>